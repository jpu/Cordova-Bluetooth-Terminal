webpackJsonp([1],[,,,,,,,function(t,e,n){"use strict";var o=n(23),i=n(24),s=n.n(i);e.a={name:"app",methods:{onDeviceReady:function(){var t=document.getElementById("videoCanvas");new JSMpeg.Player("udp://:8554",{canvas:t,videoBufferSize:524288,source:o.a});window._axios=s.a}},mounted:function(){"undefined"!=typeof cordova&&cordova?document.addEventListener("deviceready",this.onDeviceReady,!1):this.onDeviceReady()}}},,,,,,function(t,e,n){"use strict";var o=n(4);e.a={name:"list",computed:Object(o.c)(["bluetoothEnabled","bluetoothDeviceList","bluetoothDeviceListLoading"]),data:function(){return{}},watch:{bluetoothEnabled:function(t,e){!0===t&&this.getBluetoothDeviceList()}},methods:Object.assign({},Object(o.b)(["getBluetoothEnabled","getBluetoothDeviceList"]),{onDeviceReady:function(){this.getBluetoothEnabled()},itemClicked:function(t){console.log("itemClicked, name "+t.name),this.$router.push({name:"details",params:{item:t}})},refreshClicked:function(){this.getBluetoothDeviceList()}}),created:function(){console.log("list created")},mounted:function(){console.log("list mounted"),"undefined"!=typeof cordova&&cordova?document.addEventListener("deviceready",this.onDeviceReady,!1):this.onDeviceReady()}}},function(t,e,n){"use strict";function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function o(i,s){try{var r=e[i](s),c=r.value}catch(t){return void n(t)}if(!r.done)return Promise.resolve(c).then(function(t){o("next",t)},function(t){o("throw",t)});t(c)}return o("next")})}}var i=n(15),s=n.n(i),r=n(4),c=n(52);e.a={name:"details2",computed:Object(r.c)(["bluetoothConnected"]),data:function(){return{name:null,error:!1,storm:null,bluetoothConnecting:!0}},watch:{bluetoothConnected:function(t,e){this.bluetoothConnecting=!1,!0===t&&console.log("bluetoothConnected changed to "+t)}},methods:Object.assign({up:function(){this.storm.up()},down:function(){this.storm.down()},left:function(){this.storm.left()},right:function(){this.storm.right()},center:function(){this.storm.center()},toggleStandby:function(){this.storm.toggleStandby()},getVersion:function(){this.storm.getVersion()}},Object(r.b)(["bluetoothConnectAsync","bluetoothDisconnectAsync"]),{backClicked:function(){function t(){return e.apply(this,arguments)}var e=o(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,this.bluetoothDisconnectAsync();case 2:this.$router.back();case 3:case"end":return t.stop()}},t,this)}));return t}(),errorOccurred:function(){this.error=!0},errorClicked:function(){this.error=!1,this.$router.back()},onSerialDisconnectSuccess:function(){console.log("onSerialDisconnectSuccess()"),bluetoothSerial.unsubscribeRawData(this.onSerialUnsubscribeSuccess,this.onSerialUnsubscribeError)},onSerialUnsubscribeSuccess:function(){console.log("onSerialUnsubscribeSuccess()")},onSerialUnsubscribeError:function(t){console.log("onSerialUnsubscribeError()"),console.error(t),this.error=!0},onSerialDisconnectError:function(t){console.log("onSerialDisconnectError()"),console.error(t),this.error=!0},onSerialDataReceived:function(t){console.log("onSerialDataReceived(): "+t)},onSerialDataError:function(t){console.log("onSerialError()"),console.error(t)}}),created:function(){this.name=this.$route.params.item.name},mounted:function(){function t(){return e.apply(this,arguments)}var e=o(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.bluetoothConnectAsync(this.$route.params.item.id);case 3:console.log("connected, now subscribe."),bluetoothSerial.subscribeRawData(this.onSerialDataReceived,this.onSerialError),this.storm=new c.a(bluetoothSerial.write),this.error=!1,t.next=14;break;case 9:t.prev=9,t.t0=t.catch(0),console.error("Unable to connect to bluetooth device"),this.error=!0,this.bluetoothConnecting=!1;case 14:case"end":return t.stop()}},t,this,[[0,9]])}));return t}(),beforeDestroy:function(){function t(){return e.apply(this,arguments)}var e=o(s.a.mark(function t(){return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,this.bluetoothDisconnectAsync();case 3:t.next=8;break;case 5:t.prev=5,t.t0=t.catch(0),console.error(t.t0);case 8:case"end":return t.stop()}},t,this,[[0,5]])}));return t}()}},,function(t,e,n){"use strict";n.d(e,"c",function(){return o}),n.d(e,"b",function(){return i}),n.d(e,"d",function(){return s}),n.d(e,"a",function(){return r});var o="LIST",i="ENABLED",s="LOADING",r="CONNECTED"},function(t,e,n){t.exports=n(18)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n(5),i=n(21),s=n(44),r=n(45),c=n(48),a=n(54);o.a.use(s.a);var u=new s.a({mode:"hash",base:window.location.href,routes:[{name:"root",path:"/",redirect:"list"},{name:"list",path:"/list",component:r.a},{name:"details",path:"/details",props:!0,component:c.a}]});new o.a({router:u,el:"#app",template:"<App/>",components:{App:i.a},store:a.a})},,,function(t,e,n){"use strict";function o(t){n(22)}var i=n(7),s=n(43),r=n(2),c=o,a=r(i.a,s.a,!1,c,null,null);e.a=a.exports},function(t,e){},function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t){for(var e=window.atob(t),n=e.length,o=new Uint8Array(n),i=0;i<n;i++)o[i]=e.charCodeAt(i);return o.buffer}n.d(e,"a",function(){return s});var s=function t(e,n){o(this,t),this.connect=function(t){console.log("UdpSocket: connect(destination): destination = "+t),this.destination=t},this.destroy=function(){console.log("UdpSocket: destroy()"),clearTimeout(this.reconnectTimeoutId),this.shouldAttemptReconnect=!1,this.socket.close()},this.start=function(){console.log("UdpSocket: start()"),this.shouldAttemptReconnect=!!this.reconnectInterval,this.progress=0,this.established=!1,this.socket=dgram.createSocket("multicast-udp4",this.port),this.socket.on("message",this.onMessage.bind(this)),this.socket.bind(this.onOpen.bind(this),this.onClose.bind(this))},this.resume=function(t){},this.onOpen=function(){console.log("UdpSocket: onOpen()"),this.progress=1,this.established=!0},this.onClose=function(){console.log("UdpSocket: onClose()"),this.shouldAttemptReconnect&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=setTimeout(function(){this.start()}.bind(this),1e3*this.reconnectInterval))},this.onMessage=function(t){this.destination&&this.destination.write(i(t))},this.streaming=!0,this.url=e,this.port=e.split(":").slice(-1)[0].split("/")[0],this.options=n,this.socket=null,this.callbacks={connect:[],data:[]},this.destination=null,this.reconnectInterval=void 0!==n.reconnectInterval?n.reconnectInterval:5,this.shouldAttemptReconnect=!!this.reconnectInterval,this.completed=!1,this.established=!1,this.progress=0,this.reconnectTimeoutId=0}},,,,,,,,,,,,,,,,,,,,function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[t._m(0),t._v(" "),n("router-view")],1)},i=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("canvas",{attrs:{id:"videoCanvas"}},[n("p",[t._v("\n\t\t\tPlease use a browser that supports the Canvas Element.\n\t\t")])])}],s={render:o,staticRenderFns:i};e.a=s},,function(t,e,n){"use strict";function o(t){n(46)}var i=n(13),s=n(47),r=n(2),c=o,a=r(i.a,s.a,!1,c,"data-v-1c7b9d84",null);e.a=a.exports},function(t,e){},function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("div",{staticClass:"header"},[t._v("\n    Connect\n    "),n("button",{staticClass:"refresh-button",on:{click:t.refreshClicked}},[t._v("Refresh")])]),t._v(" "),t.bluetoothDeviceListLoading?n("div",{staticClass:"loading"},[t._v("Loading")]):t._e(),t._v(" "),t.bluetoothDeviceListLoading?t._e():n("div",{staticClass:"list"},t._l(t.bluetoothDeviceList,function(e){return n("div",{key:e.id,staticClass:"item",on:{click:function(n){t.itemClicked(e)}}},[n("span",{staticClass:"item-name"},[t._v(t._s(e.name))]),t._v(" "),n("span",{staticClass:"item-id"},[t._v(t._s(e.id))])])})),t._v(" "),n("div",{staticClass:"footer"},[t._v("\n    Device not in list? Pair it first in Android settings.\n  ")])])},i=[],s={render:o,staticRenderFns:i};e.a=s},function(t,e,n){"use strict";function o(t){n(49)}var i=n(14),s=n(53),r=n(2),c=o,a=r(i.a,s.a,!1,c,"data-v-27629bcb",null);e.a=a.exports},function(t,e){},,,function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return s});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),s=function(){function t(e){o(this,t),this.showError=function(){console.error(error)},this.up=function(){this.pitch=Math.max(this.pitch-this.pitchstep,700),this.actuate()},this.down=function(){this.pitch=Math.min(this.pitch+this.pitchstep,2300),this.actuate()},this.left=function(){this.yaw=Math.min(this.yaw+this.yawstep,2300),this.actuate()},this.right=function(){this.yaw=Math.max(this.yaw-this.yawstep,700),this.actuate()},this.center=function(){this.pitch=1500,this.yaw=1500,this.actuate()},this.toggleStandby=function(){this.standby=!this.standby,this.setStandby(this.standby)},this.actuate=function(){console.log("actuate, pitch: "+this.pitch+" , yaw: "+this.yaw),this.pitch==this.lastpitch&&this.yaw==this.lastyaw||(this.setPitchRollYaw(this.pitch,1500,this.yaw),this.lastpitch=this.pitch,this.lastyaw=this.yaw)},this.getVersion=function(){this.sendMessage(0,null)},this.setPitchRollYaw=function(t,e,n){var o=this.Uint16ToUint8Pair(t).concat(this.Uint16ToUint8Pair(e)).concat(this.Uint16ToUint8Pair(n));this.sendMessage(18,o)},this.sendMessage=function(t,e){var n=[250];e?n.push(e.length):n.push(0),n.push(t),e&&(n=n.concat(e)),n=n.concat(this.getCrc(t,e)),bluetoothSerial.write(n,null,this.showError)},this.setStandby=function(t){var e=[t];this.sendMessage(14,e)},this.toHexString=function(t){return Array.from(t,function(t){return("0"+(255&t).toString(16)).slice(-2)}).join("")},this.pitch=1500,this.pitchstep=30,this.lastpitch=0,this.yaw=1500,this.lastyaw=0,this.yawstep=30,this.standby=0,this.serialWrite}return i(t,[{key:"Uint16ToUint8Pair",value:function(t){return[255&t,t>>8&255]}},{key:"getCrc",value:function(t,e){var n=[t];e&&(n=n.concat(e));var o=o||65535;return n.forEach(function(t){var e=t^255&o;e=255&(e^e<<4),o=o>>8^e<<8^e<<3^e>>4,o&=65535}),this.Uint16ToUint8Pair(o)}}]),t}()},function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"details"},[n("div",{staticClass:"header"},[n("button",{staticClass:"button back",on:{click:t.backClicked}},[t._v("Back")]),t._v(" "),n("div",{staticClass:"name"},[t._v(t._s(t.$route.params.item.name))]),t._v(" "),t.error?n("button",{staticClass:"button error",on:{click:t.errorClicked}},[t._v("ERROR")]):t._e()]),t._v(" "),t.bluetoothConnecting?n("div",{staticClass:"connecting"},[t._v("\n      Connecting ...\n    ")]):t._e(),t._v(" "),t.bluetoothConnecting||t.bluetoothConnected?t._e():n("div",{staticClass:"connecting"},[t._v("\n      Disconnected\n    ")]),t._v(" "),t.bluetoothConnecting?t._e():n("div",{staticClass:"device"},[t.bluetoothConnected?n("div",{staticClass:"controls"},[n("div",{staticClass:"row"},[n("button",{attrs:{id:"up"},on:{click:t.up}},[t._v("Up")])]),t._v(" "),n("div",{staticClass:"row"},[n("button",{attrs:{id:"left"},on:{click:t.left}},[t._v("Left")]),t._v(" "),n("button",{attrs:{id:"center"},on:{click:t.center}},[t._v("Center")]),t._v(" "),n("button",{attrs:{id:"right"},on:{click:t.right}},[t._v("Right")])]),t._v(" "),n("div",{staticClass:"row"},[n("button",{attrs:{id:"down"},on:{click:t.down}},[t._v("Down")])])]):t._e(),t._v(" "),t.bluetoothConnected?n("div",{staticClass:"commands"},[n("button",{attrs:{id:"version"},on:{click:t.getVersion}},[t._v("Get version")]),t._v(" "),n("button",{attrs:{id:"standby"},on:{click:t.toggleStandby}},[t._v("Standby")])]):t._e()])])},i=[],s={render:o,staticRenderFns:i};e.a=s},function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}var s,r=n(5),c=n(4),a=n(16),u=n(55),l=n(56);r.a.use(c.a);var h={bluetoothEnabled:!1,bluetoothDeviceList:[],bluetoothDeviceListLoading:!0,bluetoothConnected:!1},d=(s={},o(s,a.c,function(t,e){var n;t.bluetoothDeviceList.splice(0),(n=t.bluetoothDeviceList).push.apply(n,i(e))}),o(s,a.b,function(t,e){t.bluetoothEnabled=e}),o(s,a.d,function(t,e){t.bluetoothDeviceListLoading=e}),o(s,a.a,function(t,e){t.bluetoothConnected=e}),s);e.a=new c.a.Store({state:h,getters:u,actions:l,mutations:d})},function(t,e,n){"use strict";function o(t){return t.bluetoothEnabled}function i(t){return t.bluetoothDeviceList}function s(t){return t.bluetoothDeviceListLoading}function r(t){return t.bluetoothConnected}Object.defineProperty(e,"__esModule",{value:!0}),e.bluetoothEnabled=o,e.bluetoothDeviceList=i,e.bluetoothDeviceListLoading=s,e.bluetoothConnected=r},function(t,e,n){"use strict";function o(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function o(i,s){try{var r=e[i](s),c=r.value}catch(t){return void n(t)}if(!r.done)return Promise.resolve(c).then(function(t){o("next",t)},function(t){o("throw",t)});t(c)}return o("next")})}}Object.defineProperty(e,"__esModule",{value:!0}),n.d(e,"getBluetoothDeviceList",function(){return c}),n.d(e,"getBluetoothEnabled",function(){return a}),n.d(e,"bluetoothDisconnectAsync",function(){return u}),n.d(e,"bluetoothConnectAsync",function(){return l});var i=n(15),s=n.n(i),r=n(16),c=function(t){var e=t.commit;console.log("bluetooth: store: getBluetoothDeviceList()"),e(r.d,!0),bluetoothSerial.list(function(t){window.devices=t,console.log(t);var n=t.filter(function(t){return 7936==t.class||t.name.toLowerCase().indexOf("spec")>-1});e(r.c,n),e(r.d,!1)},function(){console.error("bluetoothSerial.list(): Error, unable to get list of paired devices.")})},a=function(t){var e=t.commit;console.log("bluetooth: store: getBluetoothDeviceList()"),bluetoothSerial.isEnabled(function(){console.log("bluetoothSerial.isEnabled() returned true"),e(r.b,!0)},function(){console.log("bluetoothSerial.isEnabled() returned false"),e(r.b,!1)})},u=function(){var t=o(s.a.mark(function t(e){var n=e.commit;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("bluetooth: store: bluetoothDisconnectAsync()"),t.abrupt("return",new Promise(function(t,e){bluetoothSerial.disconnect(function(){n(r.a,!1),t()},function(){e()})}));case 2:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}(),l=function(){var t=o(s.a.mark(function t(e,n){var o=e.commit;return s.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("bluetooth: store: bluetoothConnectAsync()"),o(r.a,!1),t.abrupt("return",new Promise(function(t,e){bluetoothSerial.connect(n,function(){o(r.a,!0),t()},function(){o(r.a,!1),e()})}));case 3:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}],[17]);
//# sourceMappingURL=client.js.map